<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartSchool Cloud ERP - XII RPL 1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #f8fafc; overflow-x: hidden; }
        .hide { display: none !important; }
        .sidebar-link.active { @apply bg-indigo-600 text-white shadow-xl shadow-indigo-200; }
        .glass { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); }
    </style>
</head>
<body>

    <div id="login-view" class="fixed inset-0 z-[100] flex items-center justify-center bg-slate-900 p-4">
        <div class="bg-white p-10 rounded-[3rem] w-full max-w-md shadow-2xl text-center relative overflow-hidden">
            <div class="absolute -top-10 -right-10 w-32 h-32 bg-indigo-100 rounded-full"></div>
            <h1 class="text-3xl font-black text-indigo-600 mb-2 italic relative">SMART<span class="text-slate-900">ERP.</span></h1>
            <p class="text-slate-400 mb-8 font-bold text-[10px] uppercase tracking-widest">Portal Kelas XII RPL 1</p>
            
            <div class="space-y-4 text-left">
                <div>
                    <label class="text-[10px] font-black ml-4 text-slate-400 uppercase">Username (Nama Lengkap)</label>
                    <input type="text" id="log-user" class="w-full p-4 bg-slate-100 rounded-2xl outline-none border-2 border-transparent focus:border-indigo-500 font-bold transition" placeholder="Contoh: Cahyo Kartiko">
                </div>
                <div>
                    <label class="text-[10px] font-black ml-4 text-slate-400 uppercase">Password</label>
                    <input type="password" id="log-pass" class="w-full p-4 bg-slate-100 rounded-2xl outline-none border-2 border-transparent focus:border-indigo-500 font-bold transition" placeholder="siswa123">
                </div>
                <button onclick="authLogin()" class="w-full bg-indigo-600 text-white py-4 rounded-2xl font-black shadow-lg hover:scale-[1.02] active:scale-95 transition-all">MASUK KE SISTEM</button>
            </div>
            <p class="mt-6 text-[10px] text-slate-400 font-medium">Lupa password? Hubungi Ketua Kelas.</p>
        </div>
    </div>

    <div id="app-view" class="hide min-h-screen flex">
        <aside class="w-72 bg-white border-r p-8 fixed h-full flex flex-col z-40">
            <div class="mb-12">
                <h2 class="text-2xl font-black text-indigo-600 italic">DASHBOARD</h2>
                <p id="user-display-name" class="text-[10px] font-bold text-slate-400 uppercase mt-1 tracking-tighter"></p>
            </div>
            
            <nav class="space-y-3 flex-1">
                <button id="nav-siswa" onclick="showSiswa()" class="sidebar-link w-full text-left p-4 rounded-2xl font-bold text-slate-500 flex items-center transition">
                    <i class="fas fa-users w-8"></i> Data Siswa
                </button>
                <button id="nav-guru" onclick="showGuru()" class="sidebar-link w-full text-left p-4 rounded-2xl font-bold text-slate-500 flex items-center transition">
                    <i class="fas fa-chalkboard-teacher w-8"></i> Wali Kelas
                </button>
                <button id="nav-absen" onclick="showAbsensi()" class="sidebar-link w-full text-left p-4 rounded-2xl font-bold text-slate-500 flex items-center transition">
                    <i class="fas fa-calendar-check w-8"></i> Presensi
                </button>
            </nav>

            <div class="mt-auto">
                <button onclick="location.reload()" class="w-full text-left p-4 text-red-500 font-bold hover:bg-red-50 rounded-2xl transition flex items-center">
                    <i class="fas fa-power-off w-8"></i> Keluar Akun
                </button>
            </div>
        </aside>

        <main class="ml-72 p-10 w-full relative">
            <header class="flex justify-between items-center mb-10">
                <div>
                    <h2 id="page-title" class="text-4xl font-black text-slate-800 tracking-tight">Data Siswa</h2>
                    <p class="text-slate-400 font-bold text-xs uppercase tracking-widest mt-1">Sistem Informasi Kelas XII RPL 1</p>
                </div>
                <div class="flex items-center gap-4 bg-white p-2 pr-6 rounded-full border shadow-sm">
                    <div class="w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white text-xs font-black" id="user-initial">A</div>
                    <div>
                        <p class="text-[10px] font-black text-slate-400 uppercase leading-none">Status Anda</p>
                        <p id="user-role-display" class="text-xs font-bold text-slate-800"></p>
                    </div>
                </div>
            </header>

            <div id="main-content"></div>
        </main>
    </div>

    <div id="modal-container" class="fixed inset-0 bg-slate-900/40 backdrop-blur-sm hide items-center justify-center z-[200]">
        </div>

    <script src="api/siswa.js"></script>
    <script src="api/login.js"></script>
    <script src="guru.js"></script>
    <script src="absensi.js"></script>
    
    <script>
        // Logic Tambahan untuk UI Sidebar
        function updateNav(activeId) {
            document.querySelectorAll('.sidebar-link').forEach(btn => btn.classList.remove('active'));
            document.getElementById(activeId).classList.add('active');
        }

        // Jalankan updateNav setiap kali fungsi halaman dipanggil
        const originalShowSiswa = showSiswa;
        showSiswa = function() {
            originalShowSiswa();
            updateNav('nav-siswa');
            document.getElementById('page-title').innerText = "Data Siswa";
        };

        const originalShowGuru = showGuru;
        showGuru = function() {
            originalShowGuru();
            updateNav('nav-guru');
            document.getElementById('page-title').innerText = "Wali Kelas";
        };

        const originalShowAbsensi = showAbsensi;
        showAbsensi = function() {
            originalShowAbsensi();
            updateNav('nav-absen');
            document.getElementById('page-title').innerText = "Presensi Kelas";
        };
    </script>
</body>
</html>
