<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartSchool ERP v.12 - Multi-Class & Multi-Role</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .hide { display: none !important; }
        .page-transition { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }
        .sidebar-btn.active { @apply bg-indigo-600 text-white shadow-lg; }
    </style>
</head>
<body class="bg-[#F8FAFC] text-slate-900">

    <div id="login-view" class="fixed inset-0 bg-slate-900 flex items-center justify-center z-[100] p-4">
        <div class="bg-white w-full max-w-md rounded-[2.5rem] p-10 shadow-2xl text-center">
            <h2 class="text-3xl font-black mb-6 italic text-indigo-600 underline">ULTRA-ACCESS.</h2>
            <div class="space-y-4">
                <input type="email" id="email" placeholder="Admin Email" class="w-full p-4 bg-slate-100 rounded-2xl outline-none border-2 border-transparent focus:border-indigo-500">
                <input type="password" id="password" placeholder="Password" class="w-full p-4 bg-slate-100 rounded-2xl outline-none border-2 border-transparent focus:border-indigo-500">
                <button onclick="authAction()" class="w-full bg-indigo-600 text-white py-4 rounded-2xl font-bold hover:bg-indigo-700 transition active:scale-95">MASUK SISTEM</button>
                <p class="text-[10px] text-slate-400 uppercase tracking-widest font-bold">Default: admin@web.id | 123</p>
            </div>
        </div>
    </div>

    <div id="dashboard-view" class="hide min-h-screen">
        <aside class="fixed left-0 top-0 h-screen w-72 bg-white border-r z-50 p-6 shadow-sm">
            <div class="text-2xl font-black text-indigo-600 mb-10 tracking-tighter">SMART<span class="text-slate-900">ERP.</span></div>
            <nav class="space-y-2">
                <button onclick="switchModule('dashboard')" id="nav-dashboard" class="sidebar-btn active w-full flex items-center gap-4 p-4 rounded-2xl font-bold transition"><i class="fas fa-home"></i> Statistik</button>
                <button onclick="switchModule('users')" id="nav-users" class="sidebar-btn w-full flex items-center gap-4 p-4 rounded-2xl font-bold text-slate-400 hover:bg-slate-50 transition"><i class="fas fa-user-shield"></i> Manajemen User</button>
                <button onclick="logout()" class="w-full flex items-center gap-4 p-4 rounded-2xl font-bold text-red-500 hover:bg-red-50 mt-20 transition"><i class="fas fa-power-off"></i> Logout</button>
            </nav>
        </aside>

        <main class="ml-72 p-10">
            <header class="flex justify-between items-center mb-10">
                <div>
                    <h2 id="view-title" class="text-4xl font-black text-slate-900">Dashboard</h2>
                    <p class="text-slate-400 font-medium">Sistem Kendali Master Admin</p>
                </div>
                
                <div class="flex items-center gap-4">
                    <label class="text-xs font-bold text-slate-400 uppercase">Filter Kelas:</label>
                    <select id="class-filter" onchange="filterDataByClass()" class="p-3 bg-white border rounded-xl font-bold text-indigo-600 outline-none">
                        <option value="ALL">Semua Kelas</option>
                        <option value="XII-RPL-1">XII RPL 1</option>
                        <option value="XII-RPL-2">XII RPL 2</option>
                        <option value="XI-TKJ">XI TKJ</option>
                    </select>
                </div>
            </header>

            <div id="main-content" class="page-transition">
                </div>
        </main>
    </div>

    <div id="form-modal" class="fixed inset-0 bg-slate-900/40 backdrop-blur-md hide items-center justify-center z-[110] p-4">
        <div class="bg-white w-full max-w-xl rounded-[2.5rem] p-10 shadow-2xl">
            <h3 id="form-title" class="text-2xl font-black mb-6">Tambah User Baru</h3>
            <div class="grid grid-cols-2 gap-4">
                <input type="hidden" id="edit-id">
                <div class="col-span-2">
                    <label class="text-xs font-bold text-slate-400 ml-2">Nama Lengkap</label>
                    <input type="text" id="m-nama" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:border-indigo-500" placeholder="Contoh: Zidane Abdi">
                </div>
                <div>
                    <label class="text-xs font-bold text-slate-400 ml-2">Pilih Role</label>
                    <select id="m-role" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none">
                        <option value="Murid">Murid</option>
                        <option value="Guru">Guru</option>
                        <option value="Wali Kelas">Wali Kelas</option>
                        <option value="Ketua Kelas">Ketua Kelas</option>
                        <option value="Sekretaris">Sekretaris</option>
                        <option value="Bendahara">Bendahara</option>
                        <option value="Kebersihan">Kebersihan</option>
                    </select>
                </div>
                <div>
                    <label class="text-xs font-bold text-slate-400 ml-2">Penempatan Kelas</label>
                    <select id="m-kelas" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none">
                        <option value="XII-RPL-1">XII RPL 1</option>
                        <option value="XII-RPL-2">XII RPL 2</option>
                        <option value="XI-TKJ">XI TKJ</option>
                    </select>
                </div>
                <div class="col-span-2 flex gap-4 mt-6">
                    <button onclick="saveUser()" class="flex-1 bg-indigo-600 text-white py-4 rounded-2xl font-bold shadow-lg hover:bg-indigo-700 transition">SIMPAN DATA</button>
                    <button onclick="closeModal()" class="flex-1 bg-slate-100 py-4 rounded-2xl font-bold hover:bg-slate-200 transition">BATAL</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA STATE ---
        let users = [
            { id: 1, nama: "Zidane Master", role: "Wali Kelas", kelas: "XII-RPL-1" },
            { id: 2, nama: "Ahmad Murid", role: "Murid", kelas: "XII-RPL-1" },
            { id: 3, nama: "Siti Guru", role: "Guru", kelas: "XII-RPL-2" },
            { id: 4, nama: "Budi Kebersihan", role: "Kebersihan", kelas: "XII-RPL-2" }
        ];

        let currentFilter = "ALL";

        // --- AUTH & VIEW CONTROLLER ---
        function authAction() {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            if(email === 'admin@web.id' && pass === '123') {
                document.getElementById('login-view').classList.add('hide');
                document.getElementById('dashboard-view').classList.remove('hide');
                switchModule('dashboard');
            } else { alert("Akses Ditolak!"); }
        }

        function switchModule(modId) {
            const content = document.getElementById('main-content');
            const title = document.getElementById('view-title');
            
            document.querySelectorAll('.sidebar-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`nav-${modId}`).classList.add('active');

            if(modId === 'dashboard') {
                title.innerText = "Dashboard Utama";
                content.innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div class="bg-indigo-600 p-8 rounded-[2.5rem] text-white shadow-xl">
                            <p class="text-xs font-bold opacity-70 uppercase">Total User</p>
                            <h4 class="text-5xl font-black mt-2">${users.length}</h4>
                        </div>
                        <div class="bg-white p-8 rounded-[2.5rem] border shadow-sm">
                            <p class="text-xs font-bold text-slate-400 uppercase">Guru Aktif</p>
                            <h4 class="text-5xl font-black text-slate-900 mt-2">${users.filter(u => u.role === 'Guru' || u.role === 'Wali Kelas').length}</h4>
                        </div>
                        <div class="bg-white p-8 rounded-[2.5rem] border shadow-sm">
                            <p class="text-xs font-bold text-slate-400 uppercase">Murid Terdata</p>
                            <h4 class="text-5xl font-black text-slate-900 mt-2">${users.filter(u => u.role !== 'Guru' && u.role !== 'Wali Kelas').length}</h4>
                        </div>
                    </div>
                `;
            } else if(modId === 'users') {
                title.innerText = "Manajemen User & Role";
                renderUserList();
            }
        }

        // --- USER LIST & FILTERING ---
        function filterDataByClass() {
            currentFilter = document.getElementById('class-filter').value;
            if(document.getElementById('nav-users').classList.contains('active')) {
                renderUserList();
            }
        }

        function renderUserList() {
            const content = document.getElementById('main-content');
            const filteredData = currentFilter === 'ALL' ? users : users.filter(u => u.kelas === currentFilter);

            content.innerHTML = `
                <div class="flex justify-between items-center mb-8">
                    <h3 class="text-xl font-bold">Daftar Anggota: <span class="text-indigo-600">${currentFilter}</span></h3>
                    <button onclick="openForm()" class="bg-indigo-600 text-white px-8 py-4 rounded-2xl font-black shadow-lg hover:scale-105 transition">+ TAMBAH USER</button>
                </div>
                <div class="bg-white rounded-[2.5rem] shadow-xl border overflow-hidden">
                    <table class="w-full text-left">
                        <thead class="bg-slate-50 border-b">
                            <tr class="text-[10px] font-black uppercase text-slate-400">
                                <th class="p-6">Nama Lengkap</th><th class="p-6">Role</th><th class="p-6">Kelas</th><th class="p-6 text-center">Aksi Master</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-100">
                            ${filteredData.map(u => `
                                <tr class="hover:bg-slate-50/80 transition">
                                    <td class="p-6">
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 bg-slate-100 rounded-full flex items-center justify-center font-bold text-indigo-600">${u.nama[0]}</div>
                                            <span class="font-bold text-slate-800">${u.nama}</span>
                                        </div>
                                    </td>
                                    <td class="p-6">${getRoleBadge(u.role)}</td>
                                    <td class="p-6 text-slate-500 font-bold text-sm">${u.kelas}</td>
                                    <td class="p-6 flex justify-center gap-2">
                                        <button onclick="openForm(${u.id})" class="p-3 text-blue-500 hover:bg-blue-50 rounded-xl"><i class="fas fa-edit"></i></button>
                                        <button onclick="deleteUser(${u.id})" class="p-3 text-red-500 hover:bg-red-50 rounded-xl"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
        }

        function getRoleBadge(role) {
            const colors = {
                'Guru': 'bg-red-100 text-red-600',
                'Wali Kelas': 'bg-purple-100 text-purple-600',
                'Murid': 'bg-blue-100 text-blue-600',
                'Ketua Kelas': 'bg-amber-100 text-amber-600',
                'Sekretaris': 'bg-emerald-100 text-emerald-600',
                'Bendahara': 'bg-pink-100 text-pink-600',
                'Kebersihan': 'bg-slate-100 text-slate-600'
            };
            return `<span class="${colors[role] || 'bg-gray-100 text-gray-600'} px-4 py-1 rounded-full text-[10px] font-black uppercase">${role}</span>`;
        }

        // --- FORM CRUD ACTIONS ---
        function openForm(id = null) {
            document.getElementById('form-modal').classList.remove('hide');
            document.getElementById('form-modal').classList.add('flex');
            
            if(id) {
                const u = users.find(x => x.id === id);
                document.getElementById('form-title').innerText = "Edit Data User";
                document.getElementById('edit-id').value = u.id;
                document.getElementById('m-nama').value = u.nama;
                document.getElementById('m-role').value = u.role;
                document.getElementById('m-kelas').value = u.kelas;
            } else {
                document.getElementById('form-title').innerText = "Tambah User Baru";
                document.getElementById('edit-id').value = "";
                document.getElementById('m-nama').value = "";
                // Default kelas ke filter aktif jika ada
                if(currentFilter !== 'ALL') document.getElementById('m-kelas').value = currentFilter;
            }
        }

        function saveUser() {
            const id = document.getElementById('edit-id').value;
            const nama = document.getElementById('m-nama').value;
            const role = document.getElementById('m-role').value;
            const kelas = document.getElementById('m-kelas').value;

            if(!nama) return alert("Nama harus diisi!");

            if(id) {
                const index = users.findIndex(x => x.id == id);
                users[index] = { id: parseInt(id), nama, role, kelas };
            } else {
                users.push({ id: Date.now(), nama, role, kelas });
            }
            
            closeModal();
            renderUserList();
        }

        function deleteUser(id) {
            if(confirm("Hapus user ini?")) {
                users = users.filter(u => u.id !== id);
                renderUserList();
            }
        }

        function closeModal() { document.getElementById('form-modal').classList.add('hide'); }
        function logout() { location.reload(); }
    </script>
</body>
</html>
